server:
  port: 7102
  servlet:
    context-path: /api/order

spring:
  application:
    name: order-api

  cloud:
    nacos:
      discovery:
        namespace: a23ff674-556f-42f5-a909-e79a517f8606
        username: nacos
        password: a123456
        server-addr: http://127.0.0.1:8848
      config:
        server-addr: http://127.0.0.1:8848
        username: nacos
        password: a123456
        namespace: a23ff674-556f-42f5-a909-e79a517f8606
        file-extension: properties
        group: DEFAULT_GROUP
  config:
    import:
      - "nacos:${spring.application.name}.${spring.cloud.nacos.config.file-extension}"


  datasource:
    url: jdbc:mysql://localhost:33061/seata_order?useSSL=false&serverTimeZone=UTC&characterEncoding=utf8
    username: root
    password: a123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    # 连接池配置
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000

  jpa:
    hibernate:
      # 启动时如何处理数据库表
      # validate: 验证表结构，不改变数据库
      # update: 更新表结构，如果有变化
      # create: 每次启动删除表并重新创建
      # create-drop: 启动创建，关闭时删除
      ddl-auto: update

    # 是否显示 SQL 语句（开发时建议开启）
    show-sql: true

    # 格式化显示的 SQL 其他属性配置
    properties:
      hibernate:
        # 格式化 SQL 语句
        format_sql: true
        # 使用新的 ID 生成器
        id.new_generator_mappings: true
        # 方言设置
        dialect: org.hibernate.dialect.MySQL8Dialect
        # 批量操作大小
        jdbc.batch_size: 20
        # 排序批次大小
        order_inserts: true
        order_updates: true

    # 是否开启 JPA 仓库
    open-in-view: false

feign:
  client:
    config:
      default:
        connectTimeout: 50000 # 单位毫秒
        readTimeout: 100000

seata:
  # 数据源代理模式
  data-source-proxy-mode: AT
  registry:
    nacos:
      server-addr: 127.0.0.1:8848
      namespace: a23ff674-556f-42f5-a909-e79a517f8606
      username: nacos
      password: a123456
      group: SEATA_GROUP
      application-name: seata-server
    type: nacos
  service:
    vgroup-mapping:
      default_tx_group: default
  tx-service-group: default_tx_group